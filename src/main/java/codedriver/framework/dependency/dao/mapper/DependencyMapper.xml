<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright(c) 2021 TechSureCo.,Ltd.AllRightsReserved.
  ~ 本内容仅限于深圳市赞悦科技有限公司内部传阅，禁止外泄以及用于其他的商业项目。
  -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="codedriver.framework.dependency.dao.mapper.DependencyMapper">

    <select id="getCallerListByCallee" resultType="java.lang.String">
        SELECT `${callerField}`
        FROM `${tableName}`
        WHERE `${calleeField}` = #{callee}
        LIMIT #{startNum} , #{pageSize}
    </select>

    <select id="getCallerCountByCallee" resultType="java.lang.Integer">
        SELECT COUNT(1)
        FROM `${tableName}`
        WHERE `${calleeField}` = #{callee}
    </select>

    <insert id="insertIgnoreDependency">
        INSERT IGNORE INTO `${tableName}` (`${callerField}`, `${calleeField}`)
        VALUES (#{caller}, #{callee})
    </insert>

    <delete id="deleteDependencyByCaller">
        DELETE
        FROM `${tableName}`
        WHERE `${callerField}` = #{caller}
    </delete>

</mapper>