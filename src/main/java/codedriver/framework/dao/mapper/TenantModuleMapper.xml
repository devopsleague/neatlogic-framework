<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="codedriver.framework.dao.mapper.TenantModuleMapper">
	<cache eviction="LRU" flushInterval="300000" size="1024" readOnly="true" />
	
	<resultMap id="tenantModuleMap" type="codedriver.framework.dto.TenantModuleVo">
		<id property="tenantUuid" column="tenant_uuid" />
		<collection property="moduleList" ofType="codedriver.framework.dto.ModuleVo">
			<result property="name" column="name" />
			<result property="description" column="description" />
			<result property="url_mapping" column="urlMapping" />
			<result property="is_active" column="isActive" />
			<result property="status" column="status" />
			<result property="version" column="version" />
			<result property="config_path" column="configPath" />
			<result property="error" column="error" />
		</collection>
	</resultMap>

	<select id="getAllTenantModule" resultMap="tenantModuleMap" useCache="true">
		SELECT 
		  tm.`tenant_uuid`,
		  tm.`module_name` ,
		   m.`description`,
		   m.`url_mapping`,
		   m.`is_active`,
		   m.`status`,
		   m.`version`,
		   m.`config_path`,
		   m.`error`
		FROM
		  `tenant_module` tm LEFT JOIN module m ON tm.`module_name` = m.`name`
	</select>
</mapper>

